<div class="app-container">
  <h1>{{ title }}</h1>

  <!-- UPLOAD SECTION -->
  <section class="upload">
    <h2>ğŸ“ Upload Document</h2>
    <input type="file" (change)="onFileChange($event)" accept=".pdf" />

    <!-- Upload Button -->
    <button (click)="onUpload()" [disabled]="uploading || !selectedFile">
      {{ uploading ? 'Uploading...' : 'Upload' }}
    </button>

    <!-- Loader Spinner for Upload -->
    <div class="spinner" *ngIf="uploading">
      <mat-progress-spinner mode="indeterminate" diameter="40"></mat-progress-spinner>
      <p>Processing document... please wait.</p>
    </div>

    <p *ngIf="uploadedFileName && !uploading" class="success">
      âœ… Uploaded: {{ uploadedFileName }}
    </p>
  </section>

  <hr />

  <!-- Q&A SECTION - always visible -->
  <section class="qa">
    <h2>ğŸ’¬ Ask a Question</h2>
    <textarea
      [(ngModel)]="question"
      placeholder="Type your question about the document..."
      rows="3"
    ></textarea>

    <!-- Ask button always active -->
    <button (click)="onAsk()">
      {{ loading ? 'Thinking...' : 'Ask' }}
    </button>

    <!-- Spinner for Answer -->
    <div class="spinner" *ngIf="loading">
      <mat-progress-spinner mode="indeterminate" diameter="40"></mat-progress-spinner>
      <p>Analyzing your document... please wait.</p>
    </div>

    <!-- Answer Display -->
    <div *ngIf="answer && !loading" class="answer-container">
      <h3>ğŸ§  Answer:</h3>
      <p class="answer">{{ answer }}</p>

      <div *ngIf="sources?.length">
        <h4>ğŸ“š References from your document:</h4>
        <ul>
          <li *ngFor="let s of sources">{{ s }}</li>
        </ul>
      </div>
    </div>
  </section>
</div>
